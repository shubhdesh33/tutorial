<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>


    <script>

        var Singleton = (function () {
            //  Private
            var instance;


            function createinstance() {

                var object = new Object('i am the instance' + new Date().toLocaleString())
                return object;
            }

            return {
                //  Public
                getInstance: function () {
                    if (!instance) {
                        instance = createinstance()         //   store the createinstance () funct in instance 

                    }
                    return instance
                }
            }
        })()




        var instance1 = Singleton.getInstance()
        var instance2 = Singleton.getInstance()

        console.log('check same instance ' + ' ' + (instance1 === instance2))



        console.log(instance1);
        console.log(instance2);
             

        //  Paper Question

          var func = function ()  {

            var a =2;
            var setA = function(newVar) {
                a = newVar
            }

            var getA = function ()  {
                return a
            }

            return {
                setA : setA,
                getA : getA
            }
          }

            var obj = func () 

            console.log(obj.setA(20))
            console.log(obj.getA())


        //  Class

        class dbconnection {

            constructor(string) {
                this.string = string;
            }

            static getstring(string) {

                if (!this.instance) {
                    this.instance = new dbconnection(string)
                }
                return this.instance
            }
        }

        //the connections are the same


        let con1 = dbconnection.getstring('mydb1')

        let con2 = dbconnection.getstring('mydb2')

        console.log(con1)

        console.log(con2)




        function AnotherSingleton(name, age) {
            this.name = name;
            this.age = age;
            if (this.constructor.instance)

                return this.constructor.instance;
            this.constructor.instance = this;
        }

        let a = new AnotherSingleton('s', 1);
        let b = new AnotherSingleton('k', 2);

        console.log(a.name, a.age, b.name, b.age) // s 1 s 1




        class Singleton1 {

            constructor(field1, field2) {
                this.field1 = field1;
                this.field2 = field2;
                Singleton1.instance = this;
            }

            static getInstance() {
                if (!Singleton1.instance) {
                    Singleton1.instance = new Singleton1('DefaultField1', 'DefaultField2');
                }
                return Singleton1.instance;
            }
        }


        console.log(Singleton1.getInstance().field1);
        console.log(Singleton1.getInstance().field2);



        var Exposer = (function () {
            var privateVariable = 10;

            var privateMethod = function () {
                console.log('Inside a private method!');
                privateVariable++;
            }

            var methodToExpose = function () {
                console.log('This is a method I want to expose!');
            }

            var otherMethodIWantToExpose = function () {
                privateMethod();
            }

            return {
                first: methodToExpose,
                second: otherMethodIWantToExpose
            };
        })();

        Exposer.first();        // Output: This is a method I want to expose!
        Exposer.second();       // Output: Inside a private method!
        Exposer.methodToExpose; // undefined



   // https://jsmanifest.com/singleton-design-pattern-in-javascript/


//  https://code.tutsplus.com/tutorials/how-to-implement-the-singleton-pattern-in-javascript-es6--cms-39927

  //  https://www.digitalocean.com/community/conceptual-articles/singleton-design-pattern-in-javascript

  //  https://www.dofactory.com/javascript/design-patterns/singleton


  //   https://www.digitalocean.com/community/conceptual-articles/module-design-pattern-in-javascript

    </script>

</body>

</html>